<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Busvar dados em Array</title>
</head>
<body>
    <div id="root"></div>
    <script>
        /*
            Buscando e contando dados em Arrays
            Array de livros por categoria:
            1 - contar o número de categorias e de livros em cada categoria.
            2 - contar o número de autores.
            3 - mostrar livros do autor Augusto Curry
            4 - transformar a função acima em uma que receba o nome do autor e 
            devolver os livros deste autor.
        */

        const booksByCategory = [
            { 
              category: "Riqueza",
              books: [
                  {
                      title: "Os segredos da mente milionária",
                      author: "T. Harv Eker"
                  },
                  {
                      title: "O homem mais rico da Babilônia",
                      author: "George S. Clason"
                  },
                  {
                      title: "Pai rico, pai pobre",
                      author: "Robert T. Kiyosaki e Sharon L. Lechter"
                  }
              ],
            }, 
            { 
                category: "Inteligência emocional",
                books: [
                   {
                      title: "Você é insubstituível",
                      author: "Augusto Cury"
                  },
                  {
                      title: "Ansiedade - como enfrentar o mal do século",
                      author: "Augusto Cury"
                  },
                  {
                      title: "Os 7 hábitos das pessoas altamente eficazes",
                      author: "Stephen R. Covey"
                  }
                ],
            },
        ]
        
        // 1 - contar o número de categorias e de livros em cada categoria.
        const totalCategories = booksByCategory.length
        // console.log(totalCategories)
        // print(totalCategories)
        for(let category of booksByCategory){
            console.log(`Total de livros da ctegoria: ${category.category}`)
            print(`Total de livros da ctegoria: ${category.category}`)
            
            console.log(category.books.length)
            print(category.books.length)
        }

        //2 - contar o número de autores.
        function countAuthors(){
            let authors = []
            for(let category of booksByCategory){
                for(let book of category.books){
                    if(authors.indexOf(book.author) == -1){
                        authors.push(book.author)
                    }
                }
            }
            console.log(`Total de autores: ${authors.length}`)
            return authors
        }

        print(countAuthors())

        // 3 - mostrar livros do autor Augusto Curry
        function booksOfCury(){
            let books = []
            for(let category of booksByCategory){
                for(let book of category.books){
                   if(book.author === "Augusto Cury"){
                       books.push(book.title)
                   }
                }
            }
            console.log(`Total de livros: ${books.length}`)
            return books
        }

        // print(booksOfCury())

        // console.log(booksByCategory)
        // print(booksByCategory)

        // 4 - transformar a função acima em uma que receba o nome do autor e 
        //     devolver os livros deste autor.
        function booksOfAuthor(author){
            let books = []
            for(let category of booksByCategory){
                for(let book of category.books){
                   if(book.author === author){
                       books.push(book.title)
                   }
                }
            }
            console.log(`Livro(s) do(s) autor(es) ${author}: ${books.join(", ")}`)
            return books
        }

        booksOfAuthor("Augusto Cury")
        print(booksOfAuthor("Augusto Cury"))
        //UTILITÁRIO
        function print(value){
            const div = document.querySelector("#root")
            if(typeof value === "object"){
                div.appendChild(document.createTextNode(JSON.stringify(value)))
            }else{
                div.appendChild(document.createTextNode(value))
            }
           const br = document.createElement("br")
           div.appendChild(br)
        }

    </script>
</body>
</html>
 